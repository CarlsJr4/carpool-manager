(this["webpackJsonpcarpool-manager"]=this["webpackJsonpcarpool-manager"]||[]).push([[0],{19:function(e,a,r){e.exports=r(32)},24:function(e,a,r){},32:function(e,a,r){"use strict";r.r(a);var t=r(0),n=r.n(t),s=r(6),i=r.n(s),l=(r(24),r(2)),c=r(4),d=r(12),o=r(3),u=r(34);function m(e,a){var r=Object(o.a)({},e);switch(a.type){case"INIT":var t=Object(d.a)(a.drivers),n=[],s={},i={};t.forEach((function(e){n.push.apply(n,Object(d.a)(e.passengers)),i=Object(o.a)({},i,Object(c.a)({},e.id,{id:e.id,name:e.name,seats:e.seats,passengerIds:Array.from(e.passengers,(function(e){return e.id}))}))})),n.forEach((function(e){s=Object(o.a)({},s,Object(c.a)({},e.id,{id:e.id,name:e.name}))}));var l=Array.from(t,(function(e){return e.id}));return l.pop(),{passengerRows:s,driverColumns:i,columnOrder:l};case"ADD_PASSENGER":var m=Object(u.a)(),p=r.driverColumns.freePassengers,v={id:m,name:a.name};return r.passengerRows=Object(o.a)({},r.passengerRows,Object(c.a)({},m,v)),p.passengerIds.push(m),r;case"ADD_DRIVER":var E=a.formData,g=E.driverName,f=E.driverSeats,b=r.driverColumns,h=r.columnOrder,O=Object(u.a)();return b=Object(o.a)({},b,Object(c.a)({},O,{id:O,name:g,passengerIds:[],seats:parseInt(f)})),r=Object(o.a)({},r,{driverColumns:b,columnOrder:[].concat(Object(d.a)(h),[[O]])});case"EDIT":var D=a.formData,I=D.driverName,C=D.driverSeats,S=r.driverColumns[a.driverId];return S=Object(o.a)({},S,{name:I,seats:C}),r.driverColumns=Object(o.a)({},r.driverColumns,Object(c.a)({},a.driverId,S)),r;case"DELETE":return r.columnOrder=r.columnOrder.filter((function(e){return e!==a.driverId})),delete r.driverColumns[a.driverId],r;case"DELETE_PASSENGER":var j=r.driverColumns[a.driverId],y=j.passengerIds;return y=y.filter((function(e){return e!==a.passengerId})),j.passengerIds=y,r;case"REORDER_PASSENGERS":var N=r.driverColumns[a.source.droppableId].passengerIds;return N.splice(a.source.index,1),N.splice(a.destination.index,0,a.draggableId),r;case"TRANSFER":var R=a.source,_=a.destination,P=a.draggableId,w=r.driverColumns[R.droppableId],x=r.driverColumns[_.droppableId];return"freePassengers"!==_.droppableId&&x.passengerIds.length===x.seats?(alert("This car is full!"),r):(w.passengerIds.splice(R.index,1),x.passengerIds.splice(_.index,0,P),r);default:throw new Error}}var p=n.a.createContext(),v=[{name:"driver1",seats:3,id:"driver1",passengers:[{name:"pass1",id:"pass1"},{name:"pass2",id:"pass2"}]},{name:"driver2",seats:3,id:"driver2",passengers:[{name:"passX",id:"passX"}]},{name:"freePassengers",seats:null,id:"freePassengers",passengers:[{name:"pass3",id:"pass3"},{name:"pass4",id:"pass4"}]}],E=function(e){var a=e.children,r=Object(t.useReducer)(m,{passengerRows:{},driverColumns:{freePassengers:{id:"freePassengers",name:"freePassengers",passengerIds:[]}},columnOrder:[]}),s=Object(l.a)(r,2),i=s[0],c=s[1];return Object(t.useEffect)((function(){c({type:"INIT",drivers:v})}),[]),n.a.createElement(p.Provider,{value:{driverList:i,updateDriverList:c}},a)};function g(e,a){var r=a.drivers;switch(a.type){case"UPDATE":if(0===r.columnOrder.length)return e;var t=function(e,a){return e+a},n=[],s=[];r.columnOrder.forEach((function(e){var a=r.driverColumns[e];s.push(a.passengerIds.length),n.push(parseInt(a.seats))}));for(var i=!1,l=0,c=s;l<c.length;l++){if(0===c[l]){i=!0;break}}var d=r.driverColumns.freePassengers.passengerIds.length;return{usedSeatCount:s.reduce(t),maxSeats:n.reduce(t),emptyCars:i,freePassengers:d};default:throw new Error}}var f=function(){var e=Object(t.useReducer)(g,{usedSeatCount:0,maxSeats:0,emptyCars:!1,freePassengers:0}),a=Object(l.a)(e,2),r=a[0],s=a[1],i=Object(t.useContext)(p).driverList;return Object(t.useEffect)((function(){return s({type:"UPDATE",drivers:i})}),[i]),n.a.createElement("ul",{className:"drivers__statusBar"},n.a.createElement("li",null,n.a.createElement("strong",null,r.usedSeatCount,"/",r.maxSeats," "),"seats used"),n.a.createElement("li",null,r.emptyCars?"There are empty cars":"No empty cars"),n.a.createElement("li",null,n.a.createElement("strong",null,r.freePassengers," "),"people need rides"))},b=r(17),h=function(e){var a=e.handleClick,r=e.icon;return(n.a.createElement("button",{className:"iconButton",onClick:a},n.a.createElement(b.a,{icon:r})))},O=r(5),D=function(e){var a=e.isDraggingOver,r=e.handleUpdate,t=e.driverId,s=e.passengers,i=e.innerRef,l=e.placeholder;return console.log(a),n.a.createElement("div",{className:a?"passengerTiles--isDraggingOver":"passengerTiles",ref:i},s.map((function(e,a){return n.a.createElement(O.b,{draggableId:e.id.toString(),index:a,key:e.id},(function(a){return n.a.createElement("div",Object.assign({},a.draggableProps,a.dragHandleProps,{ref:a.innerRef,key:e.id,id:e.id,className:"passengerTiles__card"}),n.a.createElement("p",null,n.a.createElement("span",{className:"grippy"}),e.name),n.a.createElement(h,{handleClick:function(){return r({type:"DELETE_PASSENGER",driverId:t,passengerId:e.id})},icon:"trash"}))}))})),l)},I=function(e){var a=e.name,r=e.id,s=e.passengers,i=e.totalSeats,c=e.toggleEditDriver,d=e.updateDriverBeingEdited,o=Object(t.useState)(0),u=Object(l.a)(o,2),m=u[0],v=u[1],E=Object(t.useContext)(p).updateDriverList;return Object(t.useEffect)((function(){return v(s.length/i*100)}),[s.length,i]),n.a.createElement("div",{className:"driversCard"},n.a.createElement("div",{className:"driversCard__headerTop"},n.a.createElement("p",null,a),n.a.createElement(h,{icon:"user-edit",handleClick:function(){c(!0),d({name:a,totalSeats:i,passengers:s,id:r})}})),n.a.createElement("div",{className:"driversCard__headerBottom"},n.a.createElement("p",null,"(",s.length,"/",i,")"),n.a.createElement("div",{className:"".concat(m," ")<100?"driversCard__percentBar--incomplete":"driversCard__percentBar--complete",style:{width:"".concat(m,"%")}})),n.a.createElement(O.c,{droppableId:r.toString()},(function(e,a){return n.a.createElement(D,Object.assign({},e.droppableProps,{innerRef:e.innerRef,passengers:s,handleUpdate:E,driverId:r,placeholder:e.placeholder,isDraggingOver:a.isDraggingOver}))})))},C=function(e){var a=e.children,r=e.isVisible,t=e.handleVisibility;return(n.a.createElement("div",{className:r?"modal--visible":"modal"},n.a.createElement("div",{className:"modal__content"},n.a.createElement("div",{className:"modal__close",onClick:function(){return t(!1)}},n.a.createElement(h,{icon:"times"})),a)))},S=r(0).useState;function j(){var e=S({}),a=Object(l.a)(e,2),r=a[0],t=a[1];return{formData:r,setFormData:t,handleInputChange:function(e){var a=e.target,n=a.name,s=a.value;t(Object(o.a)({},r,Object(c.a)({},n,s)))}}}var y=function(e){var a=e.isVisible,r=e.handleVisibility,t=e.handleAdd,s=j(),i=s.formData,l=s.setFormData,c=s.handleInputChange;return n.a.createElement(C,{isVisible:a,handleVisibility:r},n.a.createElement("h1",null,"Add Drivers"),n.a.createElement("form",{onSubmit:function(e){return function(e){return e.preventDefault(),e.target.reset(),l({}),t({type:"ADD_DRIVER",formData:i})}(e)}},n.a.createElement("label",{htmlFor:"driverName"},"Driver's name: "),n.a.createElement("input",{type:"text",name:"driverName",id:"driverName",value:i.driverName||"",onChange:function(e){return c(e)},required:!0}),n.a.createElement("label",{htmlFor:"driverSeats"},"Number of available seats: "),n.a.createElement("select",{name:"driverSeats",id:"driverSeats",value:i.driverSeats,onChange:function(e){return c(e)},required:!0},n.a.createElement("option",{value:""},"-"),n.a.createElement("option",{value:"1"},"1"),n.a.createElement("option",{value:"2"},"2"),n.a.createElement("option",{value:"3"},"3"),n.a.createElement("option",{value:"4"},"4"),n.a.createElement("option",{value:"5"},"5"),n.a.createElement("option",{value:"6"},"6"),n.a.createElement("option",{value:"7"},"7")),n.a.createElement("input",{type:"submit",value:"Add"})))},N=function(e){var a=e.isVisible,r=e.handleVisibility;return(n.a.createElement(C,{isVisible:a,handleVisibility:r},n.a.createElement("div",{className:"modalMessage"},n.a.createElement("h1",null,"Sit back and relax."),n.a.createElement("p",null,"Share this link with your attendees to allow them to sign up on their own!"),n.a.createElement("p",null,"No account needed."),n.a.createElement("h3",null,n.a.createElement("a",{href:"#"},"https://thisfeatureisntreadyyet.com/work-in-progress")),n.a.createElement("p",null,"They can sign up as a driver or passenger to an existing car."))))},R=function(e){var a,r=e.isVisible,s=e.handleVisibility,i=e.driver,l=j(),c=l.formData,d=l.setFormData,o=l.handleInputChange;i.passengers&&i.passengers.length>0&&(a=!0),Object(t.useEffect)((function(){return d({driverName:i.name,driverSeats:i.totalSeats})}),[i,d]);var u=Object(t.useContext)(p).updateDriverList;return n.a.createElement(C,{isVisible:r,handleVisibility:s},n.a.createElement("h1",null,"Edit Driver"),n.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),d({}),s(!1),u({type:"EDIT",driverId:i.id,formData:c})}(e)}},n.a.createElement("label",{htmlFor:"driverName"},"Driver's name:"),n.a.createElement("input",{type:"text",name:"driverName",id:"driverName",value:c.driverName||"",onChange:o,required:!0}),n.a.createElement("label",{htmlFor:"driverSeats"},"Number of available seats:"),n.a.createElement("select",{name:"driverSeats",id:"driverSeats",defaultValue:i.totalSeats,value:c.driverSeats,onChange:o},n.a.createElement("option",{value:"1"},"1"),n.a.createElement("option",{value:"2"},"2"),n.a.createElement("option",{value:"3"},"3"),n.a.createElement("option",{value:"4"},"4"),n.a.createElement("option",{value:"5"},"5"),n.a.createElement("option",{value:"6"},"6"),n.a.createElement("option",{value:"7"},"7")),n.a.createElement("input",{type:"submit",value:"Update"}),a?n.a.createElement("p",null,"To delete this driver, remove their passengers first."):n.a.createElement("button",{type:"button",onClick:function(){d({}),s(!1),u({type:"DELETE",driverId:i.id})}},"Delete Driver")))},_=function(){var e=Object(t.useState)(!1),a=Object(l.a)(e,2),r=a[0],s=a[1],i=Object(t.useState)(!1),c=Object(l.a)(i,2),d=c[0],o=c[1],u=Object(t.useState)(!1),m=Object(l.a)(u,2),v=m[0],E=m[1],g=Object(t.useState)({}),b=Object(l.a)(g,2),O=b[0],D=b[1],C=Object(t.useContext)(p),S=C.driverList,j=C.updateDriverList;return n.a.createElement("div",{className:"planner__left"},n.a.createElement(y,{isVisible:r,handleVisibility:s,handleAdd:j}),n.a.createElement(N,{isVisible:d,handleVisibility:o}),n.a.createElement(R,{isVisible:v,handleVisibility:E,driver:O}),n.a.createElement("div",{className:"drivers__header"},n.a.createElement("h3",null,"Manage Drivers"),n.a.createElement(h,{icon:"link",handleClick:function(){return o(!0)}}),n.a.createElement(h,{icon:"plus",handleClick:function(){return s(!0)}})),n.a.createElement(f,null),n.a.createElement("div",{className:"drivers__container"},S.columnOrder.map((function(e){var a=S.driverColumns[e],r=a.passengerIds.map((function(e){return S.passengerRows[e]}));return n.a.createElement(I,{key:e,id:e,name:a.name,passengers:r,totalSeats:a.seats,toggleEditDriver:E,updateDriverBeingEdited:D})}))))},P=function(){var e=j(),a=e.formData,r=e.setFormData,s=e.handleInputChange,i=Object(t.useContext)(p),l=i.updateDriverList,c=i.driverList;var d=c.driverColumns.freePassengers.passengerIds.map((function(e){return c.passengerRows[e]}));return n.a.createElement("div",{className:"passengersContainer"},n.a.createElement("h3",null,"Manage Passengers"),n.a.createElement("form",{onSubmit:function(e){return function(e){return r({}),e.preventDefault(),e.target.reset(),l({type:"ADD_PASSENGER",name:a.passengerName})}(e)}},n.a.createElement("input",{type:"text",name:"passengerName",id:"passengerName",placeholder:"Passenger's name...",value:a.name,onChange:s,required:!0}),n.a.createElement("button",{type:"submit"},"Add")),n.a.createElement(O.c,{droppableId:"freePassengers"},(function(e,a){return n.a.createElement(D,Object.assign({},e.droppableProps,{innerRef:e.innerRef,handleUpdate:l,passengers:d,placeholder:e.placeholder,driverId:"freePassengers",isDraggingOver:a.isDraggingOver}))})))},w=function(){var e=Object(t.useContext)(p).updateDriverList;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"longTermPlanner"},n.a.createElement("p",null,"Ice Skating With Friends | February 12th, 2020 | 6:00pm "),n.a.createElement("div",{className:"longTermPlanner__cards"},n.a.createElement(O.a,{onDragEnd:function(a){var r=a.source,t=a.destination,n=a.draggableId;if(t&&(t.droppableId!==r.droppableId||t.index!==r.index)){var s=r.droppableId,i=t.droppableId;e(s===i?{type:"REORDER_PASSENGERS",source:r,destination:t,draggableId:n}:{type:"TRANSFER",source:r,destination:t,draggableId:n})}}},n.a.createElement(_,null),n.a.createElement(P,null)))))};var x=function(){return n.a.createElement(E,null,n.a.createElement(w,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=r(9),T=r(7);V.b.add(T.d,T.e,T.a,T.b,T.c),i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.85995375.chunk.js.map