(this["webpackJsonpcarpool-manager"]=this["webpackJsonpcarpool-manager"]||[]).push([[0],{19:function(e,a,n){e.exports=n(32)},24:function(e,a,n){},32:function(e,a,n){"use strict";n.r(a);var t=n(0),r=n.n(t),s=n(6),i=n.n(s),l=(n(24),n(2)),c=n(4),d=n(12),u=n(3),o=n(34);function m(e,a){var n=Object(u.a)({},e);switch(a.type){case"INIT":var t=Object(d.a)(a.drivers),r=[],s={},i={};t.forEach((function(e){r.push.apply(r,Object(d.a)(e.passengers)),i=Object(u.a)({},i,Object(c.a)({},e.id,{id:e.id,name:e.name,nickname:e.nickname,seats:e.seats,passengerIds:Array.from(e.passengers,(function(e){return e.id}))}))})),r.forEach((function(e){s=Object(u.a)({},s,Object(c.a)({},e.id,{id:e.id,name:e.name,nickname:e.nickname}))}));var l=Array.from(t,(function(e){return e.id}));return l.pop(),{passengerRows:s,driverColumns:i,columnOrder:l};case"ADD_PASSENGER":var m=Object(o.a)(),p={id:m,name:a.name,nickname:a.nickname||null};if(n.passengerRows=Object(u.a)({},n.passengerRows,Object(c.a)({},m,p)),a.driverId)n.driverColumns[a.driverId].passengerIds.push(m);else n.driverColumns.unassignedPassengers.passengerIds.push(m);return n;case"ADD_DRIVER":var v=a.formData,g=v.driverName,E=v.driverNickname,b=v.driverSeats,h=n.driverColumns,f=n.columnOrder,I=Object(o.a)();return h=Object(u.a)({},h,Object(c.a)({},I,{id:I,name:g,nickname:E,passengerIds:[],seats:parseInt(b)})),n=Object(u.a)({},n,{driverColumns:h,columnOrder:[].concat(Object(d.a)(f),[I])});case"EDIT_DRIVER_SEATS":var O=a.formData.driverSeats,D=n.driverColumns[a.driverId];return D=Object(u.a)({},D,{seats:parseInt(O)}),n.driverColumns=Object(u.a)({},n.driverColumns,Object(c.a)({},a.driverId,D)),n;case"EDIT_DRIVER_NAME":var C=n.driverColumns[a.itemId];return C=Object(u.a)({},C,Object(c.a)({},a.fieldName,a.value||null)),n.driverColumns=Object(u.a)({},n.driverColumns,Object(c.a)({},a.itemId,C)),n;case"EDIT_PASSENGER":var S=n.passengerRows[a.itemId];return S=Object(u.a)({},S,Object(c.a)({},a.fieldName,a.value||null)),n.passengerRows=Object(u.a)({},n.passengerRows,Object(c.a)({},a.itemId,S)),n;case"DELETE_DRIVER":return n.columnOrder=n.columnOrder.filter((function(e){return e!==a.driverId})),delete n.driverColumns[a.driverId],n;case"DELETE_PASSENGER":var k=a.passengerId,N=a.driverId,j=n.driverColumns[N],y=j.passengerIds;if(y=y.filter((function(e){return e!==k})),j.passengerIds=y,"unassignedPassengers"!==j.id)n.driverColumns.unassignedPassengers.passengerIds.push(k);if("unassignedPassengers"===j.id)delete n.passengerRows[k];return n;case"REORDER_PASSENGERS":var R=n.driverColumns[a.source.droppableId].passengerIds;return R.splice(a.source.index,1),R.splice(a.destination.index,0,a.draggableId),n;case"TRANSFER":var _=a.source,V=a.destination,w=a.draggableId,x=n.driverColumns[_.droppableId],P=n.driverColumns[V.droppableId];return"unassignedPassengers"!==V.droppableId&&P.passengerIds.length===P.seats?(alert("This car is full!"),n):(x.passengerIds.splice(_.index,1),P.passengerIds.splice(V.index,0,w),n);default:throw new Error}}var p=r.a.createContext(),v=[{name:"Jim Halpert",nickname:"William M. Buttlicker",seats:3,id:"driver1",passengers:[{name:"Michael Scott",nickname:"Prison Mike",id:"pass1"},{name:"Dwight Schrute",nickname:null,id:"pass2"}]},{name:"driver2",nickname:null,seats:3,id:"driver2",passengers:[{name:"passX",nickname:null,id:"passX"}]},{name:"unassignedPassengers",seats:null,id:"unassignedPassengers",passengers:[{name:"pass3",nickname:null,id:"pass3"},{name:"pass4",nickname:null,id:"pass4"}]}],g=function(e){var a=e.children,n=Object(t.useReducer)(m,{passengerRows:{},driverColumns:{unassignedPassengers:{id:"unassignedPassengers",name:"unassignedPassengers",passengerIds:[]}},columnOrder:[]}),s=Object(l.a)(n,2),i=s[0],c=s[1];return Object(t.useEffect)((function(){c({type:"INIT",drivers:v})}),[]),r.a.createElement(p.Provider,{value:{driverList:i,updateDriverList:c}},a)};function E(e,a){var n=a.drivers;switch(a.type){case"UPDATE":if(0===n.columnOrder.length)return e;var t=function(e,a){return e+a},r=[],s=[];n.columnOrder.forEach((function(e){var a=n.driverColumns[e];s.push(a.passengerIds.length),r.push(parseInt(a.seats))}));for(var i=!1,l=0,c=s;l<c.length;l++){if(0===c[l]){i=!0;break}}var d=n.driverColumns.unassignedPassengers.passengerIds.length;return{usedSeatCount:s.reduce(t),maxSeats:r.reduce(t),emptyCars:i,unassignedPassengers:d};default:throw new Error}}var b=function(){var e=Object(t.useReducer)(E,{usedSeatCount:0,maxSeats:0,emptyCars:!1,unassignedPassengers:0}),a=Object(l.a)(e,2),n=a[0],s=a[1],i=Object(t.useContext)(p).driverList;return Object(t.useEffect)((function(){return s({type:"UPDATE",drivers:i})}),[i]),r.a.createElement("ul",{className:"drivers__statusBar"},r.a.createElement("li",null,r.a.createElement("strong",null,n.usedSeatCount,"/",n.maxSeats," "),"seats used"),r.a.createElement("li",null,n.emptyCars?"There are empty cars":"No empty cars"),r.a.createElement("li",null,r.a.createElement("strong",null,n.unassignedPassengers," "),"people need rides"))},h=n(17),f=function(e){var a=e.handleClick,n=e.icon;return(r.a.createElement("button",{className:"iconButton",onClick:a},r.a.createElement(h.a,{icon:n})))},I=n(5);function O(){var e=Object(t.useContext)(p).updateDriverList;return{handleBlurEdit:function(a,n,t,r,s){0!==a.target.value.length||"nickname"===a.target.name?e({type:t,columnId:r,itemId:s,fieldName:a.target.name,value:a.target.value}):a.target.value=n},handleKeyEdit:function(e){13===e.keyCode&&e.target.blur()}}}var D=function(e){var a=e.isDraggingOver,n=e.handleUpdate,t=e.driverId,s=e.passengers,i=e.innerRef,l=e.placeholder,c=O(),d=c.handleBlurEdit,u=c.handleKeyEdit;return r.a.createElement("div",{className:a?"passengerTiles--isDraggingOver":"passengerTiles",ref:i},s.map((function(e,a){return r.a.createElement(I.b,{draggableId:e.id.toString(),index:a,key:e.id},(function(a){return r.a.createElement("div",Object.assign({},a.draggableProps,{ref:a.innerRef,key:e.id,id:e.id,className:"passengerTiles__card"}),r.a.createElement("div",a.dragHandleProps,r.a.createElement("span",{className:"grippy"})),r.a.createElement("textarea",{rows:"1",defaultValue:e.name,spellCheck:!1,maxLength:"20",name:"name",onBlur:function(a){return d(a,e.name,"EDIT_PASSENGER",t,e.id)},onKeyDown:u}),r.a.createElement(f,{handleClick:function(){return n({type:"DELETE_PASSENGER",driverId:t,passengerId:e.id})},icon:"trash"}),r.a.createElement("textarea",{rows:"1",defaultValue:e.nickname,spellCheck:!1,maxLength:"20",name:"nickname",placeholder:"(no nickname)",onBlur:function(a){return d(a,e.nickname,"EDIT_PASSENGER",t,e.id)},onKeyDown:u}))}))})),l)},C=function(e){var a=e.name,n=e.nickname,s=e.id,i=e.passengers,c=e.totalSeats,d=e.toggleEditDriver,u=e.updateDriverBeingEdited,o=Object(t.useState)(0),m=Object(l.a)(o,2),v=m[0],g=m[1],E=Object(t.useContext)(p).updateDriverList,b=O(),h=b.handleBlurEdit,C=b.handleKeyEdit;return Object(t.useEffect)((function(){return g(i.length/c*100)}),[i.length,c]),r.a.createElement("div",{className:"driversCard"},r.a.createElement("div",{className:"driversCard__headerTop"},r.a.createElement("textarea",{defaultValue:a,name:"name",rows:"1",className:"driversCard__name",spellCheck:!1,maxLength:"20",onKeyDown:C,onBlur:function(e){return h(e,a,"EDIT_DRIVER_NAME",s,s)}}),r.a.createElement(f,{icon:"user-edit",handleClick:function(){d(!0),u({totalSeats:c,passengers:i,id:s})}}),r.a.createElement("textarea",{defaultValue:n,spellCheck:!1,name:"nickname",placeholder:"(no nickname)",rows:"1",maxLength:"20",onKeyDown:C,onBlur:function(e){return h(e,n,"EDIT_DRIVER_NAME",s,s)}})),r.a.createElement("div",{className:"driversCard__headerBottom"},r.a.createElement("p",null,"(",i.length,"/",c,")"),r.a.createElement("div",{className:"driversCard__percentBarContainer"},r.a.createElement("div",{className:"".concat(v," ")<100?"driversCard__percentBar--incomplete":"driversCard__percentBar--complete",style:{width:"".concat(v,"%")}}))),r.a.createElement(I.c,{droppableId:s.toString()},(function(e,a){return r.a.createElement(D,Object.assign({},e.droppableProps,{innerRef:e.innerRef,passengers:i,handleUpdate:E,driverId:s,placeholder:e.placeholder,isDraggingOver:a.isDraggingOver}))})))},S=function(e){var a=e.children,n=e.isVisible,t=e.handleVisibility;return(r.a.createElement("div",{className:n?"modal--visible":"modal"},r.a.createElement("div",{className:"modal__content"},r.a.createElement("div",{className:"modal__close",onClick:function(){return t(!1)}},r.a.createElement(f,{icon:"times"})),a)))},k=n(0).useState;function N(){var e=k({}),a=Object(l.a)(e,2),n=a[0],t=a[1];return{formData:n,setFormData:t,handleInputChange:function(e){var a=e.target,r=a.name,s=a.value;t(Object(u.a)({},n,Object(c.a)({},r,s)))}}}var j=function(e){var a=e.isVisible,n=e.handleVisibility,t=e.handleAdd,s=N(),i=s.formData,l=s.setFormData,c=s.handleInputChange;return r.a.createElement(S,{isVisible:a,handleVisibility:n},r.a.createElement("h1",null,"Add Drivers"),r.a.createElement("form",{onSubmit:function(e){return function(e){return e.preventDefault(),e.target.reset(),l({}),t({type:"ADD_DRIVER",formData:i})}(e)}},r.a.createElement("label",{htmlFor:"driverName"},"Name: "),r.a.createElement("input",{type:"text",name:"driverName",id:"driverName_Add",value:i.driverName||"",onChange:function(e){return c(e)},required:!0,maxLength:"20"}),r.a.createElement("label",{htmlFor:"driverNickname"},"Nickname (optional): "),r.a.createElement("input",{type:"text",name:"driverNickname",id:"driverNickname_Add",value:i.driverNickname||"",onChange:function(e){return c(e)},maxLength:"20"}),r.a.createElement("label",{htmlFor:"driverSeats"},"Number of available seats: "),r.a.createElement("select",{name:"driverSeats",id:"driverSeats_Add",value:i.driverSeats,onChange:function(e){return c(e)},required:!0},r.a.createElement("option",{value:""},"-"),r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"5"},"5"),r.a.createElement("option",{value:"6"},"6"),r.a.createElement("option",{value:"7"},"7")),r.a.createElement("input",{type:"submit",value:"Add"})))},y=function(e){var a=e.isVisible,n=e.handleVisibility;return(r.a.createElement(S,{isVisible:a,handleVisibility:n},r.a.createElement("div",{className:"modalMessage"},r.a.createElement("h1",null,"Sit back and relax."),r.a.createElement("strong",null,r.a.createElement("a",{href:"#"},"https://thisfeatureisntreadyyet.com/work-in-progress")),r.a.createElement("p",null,"Share this link with your attendees to allow them to sign up on their own!"),r.a.createElement("p",null,"No account needed."),r.a.createElement("p",null,"They can sign up as a driver or passenger to an existing car."))))},R=function(e){var a,n=e.isVisible,s=e.handleVisibility,i=e.driver,c=N(),d=c.formData,u=c.setFormData,o=c.handleInputChange,m=Object(t.useState)(!1),v=Object(l.a)(m,2),g=v[0],E=v[1];Object(t.useEffect)((function(){i.passengers&&d.driverSeats<i.passengers.length?E(!0):E(!1)}),[d.driverSeats,i.passengers]),i.passengers&&i.passengers.length>0&&(a=!0),Object(t.useEffect)((function(){return u({driverSeats:i.totalSeats})}),[i,u]);var b=Object(t.useContext)(p).updateDriverList;return r.a.createElement(S,{isVisible:n,handleVisibility:s},r.a.createElement("h1",null,"Edit seat count"),r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),u({}),s(!1),b({type:"EDIT_DRIVER_SEATS",driverId:i.id,formData:d})}(e)}},r.a.createElement("label",{htmlFor:"driverSeats"},"Number of available seats:"),r.a.createElement("select",{name:"driverSeats",id:"driverSeats__Edit",defaultValue:i.totalSeats,value:d.driverSeats,onChange:o},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"5"},"5"),r.a.createElement("option",{value:"6"},"6"),r.a.createElement("option",{value:"7"},"7")),g&&r.a.createElement("p",null,"You can't have less seats than passengers."),r.a.createElement("input",{type:"submit",value:"Update",disabled:g}),a?r.a.createElement("p",null,"To delete this driver, remove their passengers first."):r.a.createElement("button",{type:"button",onClick:function(){u({}),s(!1),b({type:"DELETE_DRIVER",driverId:i.id})}},"Delete Driver")))},_=function(){var e=Object(t.useState)(!1),a=Object(l.a)(e,2),n=a[0],s=a[1],i=Object(t.useState)(!1),c=Object(l.a)(i,2),d=c[0],u=c[1],o=Object(t.useState)(!1),m=Object(l.a)(o,2),v=m[0],g=m[1],E=Object(t.useState)({}),h=Object(l.a)(E,2),I=h[0],O=h[1],D=Object(t.useContext)(p),S=D.driverList,k=D.updateDriverList;return r.a.createElement("div",{className:"planner__left"},r.a.createElement(j,{isVisible:n,handleVisibility:s,handleAdd:k}),r.a.createElement(y,{isVisible:d,handleVisibility:u}),r.a.createElement(R,{isVisible:v,handleVisibility:g,driver:I}),r.a.createElement("div",{className:"drivers__header"},r.a.createElement("h3",null,"Manage Drivers"),r.a.createElement(f,{icon:"link",handleClick:function(){return u(!0)}}),r.a.createElement(f,{icon:"plus",handleClick:function(){return s(!0)}})),r.a.createElement(b,null),r.a.createElement("div",{className:"drivers__container"},S.columnOrder.map((function(e){var a=S.driverColumns[e],n=a.passengerIds.map((function(e){return S.passengerRows[e]}));return r.a.createElement(C,{key:e,id:e,name:a.name,nickname:a.nickname,passengers:n,totalSeats:a.seats,toggleEditDriver:g,updateDriverBeingEdited:O})}))))};function V(e){var a=e.isVisible,n=e.handleVisibility,s=N(),i=s.formData,l=s.setFormData,c=s.handleInputChange,d=Object(t.useContext)(p),u=d.updateDriverList,o=d.driverList,m=Object(t.useRef)(null),v=Object(t.useRef)(null);var g=o.columnOrder.map((function(e){var a=o.driverColumns[e];if(a.passengerIds.length<a.seats)return r.a.createElement("option",{value:a.id,key:a.id},a.name," (",a.passengerIds.length,"/",a.seats,")")}));return(r.a.createElement(S,{isVisible:a,handleVisibility:n},r.a.createElement("h1",null,"Add riders"),r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault();var a=i.driverId,n=o.driverColumns[a];return n&&n.passengerIds.length===n.seats?l({}):l({driverId:i.driverId}),m.current.focus(),m.current.value="",v.current.value="",u({type:"ADD_PASSENGER",name:i.passengerName,nickname:i.passengerNickname,driverId:i.driverId})}(e)}},r.a.createElement("label",{htmlFor:"passengerName"},"Name:"),r.a.createElement("input",{type:"text",name:"passengerName",id:"passengerName",value:i.name,onChange:c,maxLength:"20",ref:m,required:!0}),r.a.createElement("label",{htmlFor:"passengerNickname"},"Nickname (optional):"),r.a.createElement("input",{type:"text",name:"passengerNickname",id:"passengerNickname",value:i.nickname,onChange:c,ref:v,maxLength:"20"}),r.a.createElement("label",{htmlFor:"driverId"},"Directly assign to car (optional):"),r.a.createElement("select",{name:"driverId",id:"driverId",onChange:c},r.a.createElement("option",{value:""},"none"),g),r.a.createElement("button",{type:"submit"},"Add"))))}var w=function(){var e=Object(t.useContext)(p),a=e.updateDriverList,n=e.driverList,s=Object(t.useState)(!1),i=Object(l.a)(s,2),c=i[0],d=i[1],u=n.driverColumns.unassignedPassengers.passengerIds.map((function(e){return n.passengerRows[e]}));return r.a.createElement("div",{className:"passengersContainer"},r.a.createElement(V,{isVisible:c,handleVisibility:d}),r.a.createElement("div",{className:"passengersContainer__header"},r.a.createElement("h3",null,"Unassigned Riders"),r.a.createElement(f,{icon:"plus",handleClick:function(){return d(!0)}})),r.a.createElement(I.c,{droppableId:"unassignedPassengers"},(function(e,n){return r.a.createElement(D,Object.assign({},e.droppableProps,{innerRef:e.innerRef,handleUpdate:a,passengers:u,placeholder:e.placeholder,driverId:"unassignedPassengers",isDraggingOver:n.isDraggingOver}))})))},x=function(){var e=Object(t.useContext)(p).updateDriverList;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"longTermPlanner"},r.a.createElement("p",null,"Ice Skating With Friends | February 12th, 2020 | 6:00pm "),r.a.createElement("div",{className:"longTermPlanner__cards"},r.a.createElement(I.a,{onDragEnd:function(a){var n=a.source,t=a.destination,r=a.draggableId;if(t&&(t.droppableId!==n.droppableId||t.index!==n.index)){var s=n.droppableId,i=t.droppableId;e(s===i?{type:"REORDER_PASSENGERS",source:n,destination:t,draggableId:r}:{type:"TRANSFER",source:n,destination:t,draggableId:r})}}},r.a.createElement(_,null),r.a.createElement(w,null)))))};var P=function(){return r.a.createElement(g,null,r.a.createElement(x,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A=n(9),T=n(7);A.b.add(T.d,T.e,T.a,T.b,T.c),i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.72cecb8e.chunk.js.map